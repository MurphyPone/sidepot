<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poker Payout Calculator</title>
<style>
body { font-family: Arial, sans-serif; margin: 2rem; }
h1 { font-size: 1.5rem; }
.player { margin-bottom: 1rem; padding: 1rem; border: 1px solid #ccc; border-radius: 8px; }
input { margin: 0.2rem; }
button { margin-top: 1rem; }
pre { background: #f7f7f7; padding: 1rem; border-radius: 8px; }
</style>
</head>
<body>
<h1>Poker Payout Calculator</h1>


<label>Number of boards: <input type="number" id="boards" value="1" min="1"></label>


<div id="players"></div>
<button onclick="addPlayer()">Add Player</button>
<br>
<button onclick="compute()">Compute Payouts</button>


<h2>Results</h2>
<pre id="results"></pre>


<script>
let playerCount = 0;


function addPlayer() {
playerCount++;
const div = document.createElement('div');
div.className = 'player';
div.id = 'player' + playerCount;
div.innerHTML = `
<strong>Player ${playerCount}</strong><br>
Name: <input type="text" class="name"><br>
Bet: <input type="number" class="bet" min="0"><br>
Hands (comma separated strengths per board): <input type="text" class="hands" placeholder="e.g. 10,12">
`;
document.getElementById('players').appendChild(div);
}


function compute() {
const boards = parseInt(document.getElementById('boards').value);
const players = [];
document.querySelectorAll('.player').forEach(div => {
const name = div.querySelector('.name').value;
const bet = parseInt(div.querySelector('.bet').value);
const hands = div.querySelector('.hands').value.split(',').map(x => parseInt(x.trim()));
if (name && !isNaN(bet) && hands.length === boards) {
players.push({ name, bet, hands });
}
});


const payouts = computePayouts(players, boards);
document.getElementById('results').textContent = JSON.stringify(payouts, null, 2);
}


// Core logic ported from Python to JS
function computePayouts(players, boards) {
const bets = [...new Set(players.map(p => p.bet))].sort((a, b) => a - b);
const pots = [];
let prev = 0;
for (let b of bets) {
const contributors = players.filter(p => p.bet >= b);
const amount = (b - prev) * contributors.length;
pots.push({ amount, contributors: contributors.map(c => c.name), per_board: amount / boards });
prev = b;
}


const payouts = {};
for (let p of players) payouts[p.name] = 0;


for (let board = 0; board < boards; board++) {
for (let pot of pots) {
const contenders = players.filter(p => pot.contributors.includes(p.name));
const maxScore = Math.max(...contenders.map(p => p.hands[board]));
const winners = contenders.filter(p => p.hands[board] === maxScore);
const share = pot.per_board / winners.length;
winners.forEach(w => { payouts[w.name] += share; });
}
}
return payouts;
}
</script>
</body>
</html>